<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>日文單字練習 - 100 單字</title>
<style>
body {
    font-family: Arial, sans-serif;
    background-color: #121212;
    color: #ffffff;
    margin: 0;
    padding: 10px;
}
h1, h2 { text-align: center; margin-bottom: 15px; font-size: 2em; }
.flashcards-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
    gap: 8px;
    justify-items: center;
}
.flashcard {
    width: 70px;
    height: 70px;
    background-color: #1e1e1e;
    border-radius: 10px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-size: 11px;
    cursor: pointer;
    text-align: center;
    word-break: break-word;
    padding: 3px;
}
.jp { font-size: 18px; font-weight: bold; margin-bottom:5px; text-align:center; }
.romaji { font-size: 12px; color: #cccccc; }
.cn { font-size: 16px; color: #00ff99; }

.choiceBtn {
    margin: 5px;
    padding: 12px 20px;
    cursor:pointer;
    border-radius: 8px;
    font-size: 18px;
    width: 80%;
    max-width: 300px;
}
.correct { background-color: green !important; color: #fff; }
.wrong { background-color: red !important; color: #fff; }

#examArea, #examResult, #practiceArea { display:none; }
#practiceChoices, #examChoices { display:flex; flex-direction:column; align-items:center; }
button { outline:none; border:none; }

@media screen and (max-width: 430px){
    .flashcard { width: 60px; height: 60px; font-size:10px; }
    .jp { font-size: 26px; }
    .cn { font-size: 16px; }
    .choiceBtn { padding:10px 16px; font-size:16px; width:90%; }
}
</style>
</head>
<body>

<h1>日文單字練習（100 單字）</h1>

<div id="modeContainer" style="text-align:center; margin-bottom:15px;">
    <button onclick="startPractice()">練習模式</button>
    <button onclick="startExam()">考試模式</button>
</div>

<div class="flashcards-container" id="flashcardsGrid"></div>

<!-- 練習模式 -->
<div id="practiceArea">
    <h2>練習模式（4選1）</h2>
    <div id="practiceCard"></div>
    <div id="practiceChoices"></div>
    <button onclick="exitMode()">中途退出</button>
</div>

<!-- 考試模式 -->
<div id="examArea">
    <h2>考試模式（4選1）</h2>
    <div id="examCard"></div>
    <div id="examChoices"></div>
    <div id="examProgress" style="margin-top:5px;"></div>
    <button onclick="exitMode()">中途退出</button>
</div>

<!-- 考試結果 -->
<div id="examResult">
    <h2>考試結果</h2>
    <p>錯誤題目：</p>
    <ul id="examErrors"></ul>
    <button onclick="backToHome()">返回主頁</button>
</div>

<script>
const vocab = [
{jp:"猫", romaji:"neko", cn:"貓"},{jp:"犬", romaji:"inu", cn:"狗"},
{jp:"鳥", romaji:"tori", cn:"鳥"},{jp:"魚", romaji:"sakana", cn:"魚"},
{jp:"馬", romaji:"uma", cn:"馬"},{jp:"牛", romaji:"ushi", cn:"牛"},
{jp:"豚", romaji:"buta", cn:"豬"},{jp:"羊", romaji:"hitsuji", cn:"羊"},
{jp:"山", romaji:"yama", cn:"山"},{jp:"川", romaji:"kawa", cn:"河川"},
{jp:"海", romaji:"umi", cn:"海"},{jp:"空", romaji:"sora", cn:"天空"},
{jp:"雨", romaji:"ame", cn:"雨"},{jp:"雪", romaji:"yuki", cn:"雪"},
{jp:"風", romaji:"kaze", cn:"風"},{jp:"天気", romaji:"tenki", cn:"天氣"},
{jp:"晴れ", romaji:"hare", cn:"晴天"},{jp:"曇り", romaji:"kumori", cn:"陰天"},
{jp:"雷", romaji:"kaminari", cn:"雷"},{jp:"雲", romaji:"kumo", cn:"雲"},
{jp:"朝", romaji:"asa", cn:"早上"},{jp:"昼", romaji:"hiru", cn:"中午"},
{jp:"夜", romaji:"yoru", cn:"晚上"},{jp:"時間", romaji:"jikan", cn:"時間"},
{jp:"分", romaji:"fun", cn:"分鐘"},{jp:"秒", romaji:"byou", cn:"秒"},
{jp:"曜日", romaji:"youbi", cn:"星期"},{jp:"月曜日", romaji:"getsuyoubi", cn:"星期一"},
{jp:"火曜日", romaji:"kayoubi", cn:"星期二"},{jp:"水曜日", romaji:"suiyoubi", cn:"星期三"},
{jp:"木曜日", romaji:"mokuyoubi", cn:"星期四"},{jp:"金曜日", romaji:"kinyoubi", cn:"星期五"},
{jp:"土曜日", romaji:"doyoubi", cn:"星期六"},{jp:"日曜日", romaji:"nichiyoubi", cn:"星期日"},
{jp:"年", romaji:"toshi", cn:"年"},{jp:"月", romaji:"tsuki", cn:"月"},
{jp:"日", romaji:"hi", cn:"日 / 太陽"},{jp:"昨日", romaji:"kinou", cn:"昨天"},
{jp:"今日", romaji:"kyou", cn:"今天"},{jp:"明日", romaji:"ashita", cn:"明天"},
{jp:"家", romaji:"ie", cn:"家"},{jp:"部屋", romaji:"heya", cn:"房間"},
{jp:"台所", romaji:"daidokoro", cn:"廚房"},{jp:"風呂", romaji:"furo", cn:"浴室"},
{jp:"トイレ", romaji:"toire", cn:"廁所"},{jp:"玄関", romaji:"genkan", cn:"玄關"},
{jp:"庭", romaji:"niwa", cn:"庭院"},{jp:"窓", romaji:"mado", cn:"窗"},
{jp:"ドア", romaji:"doa", cn:"門"},{jp:"机", romaji:"tsukue", cn:"書桌"},
{jp:"椅子", romaji:"isu", cn:"椅子"},{jp:"本", romaji:"hon", cn:"書"},
{jp:"紙", romaji:"kami", cn:"紙"},{jp:"鉛筆", romaji:"enpitsu", cn:"鉛筆"},
{jp:"消しゴム", romaji:"keshigomu", cn:"橡皮擦"},{jp:"ノート", romaji:"nooto", cn:"筆記本"},
{jp:"カバン", romaji:"kaban", cn:"包包"},{jp:"眼鏡", romaji:"megane", cn:"眼鏡"},
{jp:"時計", romaji:"tokei", cn:"手錶"},{jp:"靴", romaji:"kutsu", cn:"鞋子"},
{jp:"服", romaji:"fuku", cn:"衣服"},{jp:"帽子", romaji:"boushi", cn:"帽子"},
{jp:"手袋", romaji:"tebukuro", cn:"手套"},{jp:"携帯", romaji:"keitai", cn:"手機"},
{jp:"パソコン", romaji:"pasokon", cn:"電腦"},{jp:"テレビ", romaji:"terebi", cn:"電視"},
{jp:"ラジオ", romaji:"rajio", cn:"收音機"},{jp:"電話", romaji:"denwa", cn:"電話"},
{jp:"写真", romaji:"shashin", cn:"照片"},{jp:"絵", romaji:"e", cn:"畫"},
{jp:"学校", romaji:"gakkou", cn:"學校"},{jp:"学生", romaji:"gakusei", cn:"學生"},
{jp:"先生", romaji:"sensei", cn:"老師"},{jp:"授業", romaji:"jugyou", cn:"課程"},
{jp:"教室", romaji:"kyoushitsu", cn:"教室"},{jp:"図書館", romaji:"toshokan", cn:"圖書館"},
{jp:"試験", romaji:"shiken", cn:"考試"},{jp:"勉強", romaji:"benkyou", cn:"學習"},
{jp:"宿題", romaji:"shukudai", cn:"作業"},{jp:"友達", romaji:"tomodachi", cn:"朋友"},
{jp:"家族", romaji:"kazoku", cn:"家人"},{jp:"父", romaji:"chichi", cn:"父親"},
{jp:"母", romaji:"haha", cn:"母親"},{jp:"兄", romaji:"ani", cn:"哥哥"},
{jp:"姉", romaji:"ane", cn:"姊姊"},{jp:"弟", romaji:"otouto", cn:"弟弟"},
{jp:"妹", romaji:"imouto", cn:"妹妹"},{jp:"祖父", romaji:"sofu", cn:"祖父"},
{jp:"祖母", romaji:"sobo", cn:"祖母"},{jp:"料理", romaji:"ryouri", cn:"料理"},
{jp:"食べ物", romaji:"tabemono", cn:"食物"},{jp:"飲み物", romaji:"nomimono", cn:"飲料"},
{jp:"ご飯", romaji:"gohan", cn:"飯"},{jp:"パン", romaji:"pan", cn:"麵包"},
{jp:"水", romaji:"mizu", cn:"水"},{jp:"お茶", romaji:"ocha", cn:"茶"},
{jp:"コーヒー", romaji:"koohii", cn:"咖啡"},{jp:"牛乳", romaji:"gyuunyuu", cn:"牛奶"},
{jp:"果物", romaji:"kudamono", cn:"水果"},{jp:"野菜", romaji:"yasai", cn:"蔬菜"}
];

function shuffle(array){return array.sort(()=>Math.random()-0.5);}

// ---------- Flashcards ----------
const flashcardsGrid = document.getElementById('flashcardsGrid');
function renderGrid(){
    flashcardsGrid.innerHTML='';
    vocab.forEach(item=>{
        const card = document.createElement('div');
        card.className='flashcard';
        card.innerHTML=`<div class="jp">${item.jp}</div><div class="romaji">${item.romaji}</div><div class="cn">${item.cn}</div>`;
        flashcardsGrid.appendChild(card);
    });
}
renderGrid();

// ---------- 練習模式 ----------
let practiceQuestions = [], practiceCurrent=0;
function startPractice(){
    document.getElementById('modeContainer').style.display='none';
    document.getElementById('flashcardsGrid').style.display='none';
    document.getElementById('practiceArea').style.display='block';
    practiceQuestions = shuffle([...vocab]);
    practiceCurrent=0;
    showPracticeCard();
}

function showPracticeCard(){
    const q = practiceQuestions[practiceCurrent];
    document.getElementById('practiceCard').innerHTML=`<div class="jp">${q.jp}</div>`;
    const choices=[q];
    while(choices.length<4){
        const r=vocab[Math.floor(Math.random()*vocab.length)];
        if(!choices.includes(r)) choices.push(r);
    }
    shuffle(choices);
    const div = document.getElementById('practiceChoices');
    div.innerHTML='';
    choices.forEach(c=>{
        const btn=document.createElement('button');
        btn.className='choiceBtn';
        btn.innerHTML=`${c.cn}`;
        btn.disabled=false;
        btn.onclick=()=>{
            // 顯示紅色或綠色
            if(c===q) btn.classList.add('correct');
            else btn.classList.add('wrong');
            // 同時標示正確答案
            div.querySelectorAll('button').forEach(b=>{
                if(b.innerText===q.cn) b.classList.add('correct');
                b.disabled=true;
            });
            setTimeout(()=>{
                practiceCurrent++;
                if(practiceCurrent<practiceQuestions.length) showPracticeCard();
                else alert("練習完成！");
            },1000);
        };
        div.appendChild(btn);
    });
}

// ---------- 考試模式 ----------
let examQuestions = [], examCurrent = 0, examAnswers = [];
function startExam(){
    document.getElementById('modeContainer').style.display='none';
    document.getElementById('flashcardsGrid').style.display='none';
    document.getElementById('examArea').style.display='block';
    examQuestions = shuffle([...vocab]).slice(0,30);
    examCurrent=0;
    examAnswers=[];
    showExamCard();
}

function showExamCard(){
    const q = examQuestions[examCurrent];
    document.getElementById('examCard').innerHTML=`<div class="jp">${q.jp}</div>`;
    const choices=[q];
    while(choices.length<4){
        const r=vocab[Math.floor(Math.random()*vocab.length)];
        if(!choices.includes(r)) choices.push(r);
    }
    shuffle(choices);
    const div = document.getElementById('examChoices');
    div.innerHTML='';
    choices.forEach(c=>{
        const btn=document.createElement('button');
        btn.className='choiceBtn';
        btn.innerHTML=`${c.cn}`;
        btn.onclick=()=>submitExamAnswer(c.cn);
        div.appendChild(btn);
    });
    document.getElementById('examProgress').innerText=`題目 ${examCurrent+1} / 30`;
}

function submitExamAnswer(selected){
    const correct = examQuestions[examCurrent].cn;
    examAnswers.push({question:examQuestions[examCurrent], user:selected, correct});
    examCurrent++;
    if(examCurrent<examQuestions.length) showExamCard();
    else showExamResult();
}

function showExamResult(){
    document.getElementById('examArea').style.display='none';
    const list=document.getElementById('examErrors');
    list.innerHTML='';
    examAnswers.forEach(a=>{
        if(a.user!==a.correct){
            const li=document.createElement('li');
            li.innerHTML=`${a.question.jp} - 你的答案: ${a.user}，正確答案: ${a.correct}`;
            list.appendChild(li);
        }
    });
    document.getElementById('examResult').style.display='block';
}

function exitMode(){backToHome();}
function backToHome(){
    document.getElementById('practiceArea').style.display='none';
    document.getElementById('examArea').style.display='none';
    document.getElementById('examResult').style.display='none';
    document.getElementById('flashcardsGrid').style.display='grid';
    document.getElementById('modeContainer').style.display='block';
}
</script>
</body>
</html>
